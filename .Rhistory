read.csv("~/Downloads/ma_ad_95.csv")
ma95 <- read.csv("~/Downloads/ma_ad_95.csv")
names(ma95)
head(ma95$View_Ops_CellPhone_Phone10)
head(ma95$View_Ops_CellPhone_FullPhone)
demo <- read.csv("~/Downloads/tx_cd_10_echo19.csv")
echo <- ma95[ma95$Voters_Active == TRUE & ! is.na(ma95$View_Ops_CellPhone_Phone10),c("LALVOTERID", "Voters_FirstName", "View_Ops_CellPhone_FullPhone", "Broad.Ethnic.Groupings")]
ma95$Voters_Active
echo <- ma95[ma95$Voters_Active %in% "Active" & ! is.na(ma95$View_Ops_CellPhone_Phone10),c("LALVOTERID", "Voters_FirstName", "View_Ops_CellPhone_FullPhone", "Broad.Ethnic.Groupings")]
View(echo)
echo <- ma95[ma95$Voters_Active %in% "Active",c("LALVOTERID", "Voters_FirstName", "View_Ops_CellPhone_FullPhone", "Broad.Ethnic.Groupings")]
echo <- ma95[ma95$Voters_Active %in% "Active" & ! is.na(ma95$View_Ops_CellPhone_Phone10),c("LALVOTERID", "Voters_FirstName", "View_Ops_CellPhone_FullPhone", "Broad.Ethnic.Groupings")]
echo <- ma95[ma95$Voters_Active %in% "Active" & ! is.na(ma95$View_Ops_CellPhone_FullPhone),c("LALVOTERID", "Voters_FirstName", "View_Ops_CellPhone_FulPhone", "Broad.Ethnic.Groupings")]
echo <- ma95[ma95$Voters_Active %in% "Active" & ! is.na(ma95$View_Ops_CellPhone_FullPhone),c("LALVOTERID", "Voters_FirstName", "View_Ops_CellPhone_FullPhone", "Broad.Ethnic.Groupings")]
echo <- ma95[ma95$Voters_Active %in% "Active" & ! is.na(ma95$View_Ops_CellPhone_Phone10),c("LALVOTERID", "Voters_FirstName", "View_Ops_CellPhone_FullPhone", "Broad.Ethnic.Groupings")]
write.csv(echo, "~/Downloads/ma_ad_95-echo.csv", row.names = FALSE)
echo <- read.csv("~/Downloads/ma_ad_95-echo.scv")
echo <- read.csv("~/Downloads/ma_ad_95-echo.csv")
echo[["link"]] <- paste0("https://www.surveymonkey.com/r/XRJTRZR?&refsurv=292982532&voter_id=", echo$LALVOTERID)
View(echo)
echo[["link"]] <- paste0("https://www.surveymonkey.com/r/XRJTRZR?refsurv=292982532&voter_id=", echo$LALVOTERID)
View(echo)
write.csv(echo, "ma_ad_95_echo19.csv", row.names = F)
ma95 <- read.csv("~/Downloads/ma_ad_95.csv")
ma95[ma95$Voters_LastName %in% "May" & ma95$Voters_FirstName %in% "Robert",]
ma95[ma95$Residence_Families_FamilyID %in% "R001044537",)
ma95[ma95$Residence_Families_FamilyID %in% "R001044537",]
ma95[ma95$Residence_Addresses_AddressLine %in% "118 Goodale St",]
echo <- echo[!echo$LALVOTERID %in% "LALMA461860196",]
ma95[ma95$Voters_LastName %in% "Kerans" & ma95$Voters_FirstName %in% "Sally",]
ma95[ma95$Voters_LastName %in% "Kerans" & ma95$Voters_FirstName %in% "Sally", c("LALVOTERID", "Voters_FirstName", "Voters_LastName", "Residence_Families_FamilyID")]
ma95[ma95$Voters_LastName %in% "May" & ma95$Voters_FirstName %in% "Robert", c("LALVOTERID", "Voters_FirstName", "Voters_LastName", "Residence_Families_FamilyID")]
ma95[ma95$Voters_LastName %in% "Bates" & ma95$Voters_FirstName %in% "William", c("LALVOTERID", "Voters_FirstName", "Voters_LastName", "Residence_Families_FamilyID")]
ma95[ma95$Voters_LastName %in% "Guida" & ma95$Voters_FirstName %in% "Jason", c("LALVOTERID", "Voters_FirstName", "Voters_LastName", "Residence_Families_FamilyID")]
ma95[ma95$Voters_LastName %in% "Bates" & ma95$Voters_FirstName %in% "Bill", c("LALVOTERID", "Voters_FirstName", "Voters_LastName", "Residence_Families_FamilyID")]
ma95[ma95$Voters_LastName %in% "Bates", c("LALVOTERID", "Voters_FirstName", "Voters_LastName", "Residence_Families_FamilyID")]
ma95[ma95$Voters_LastName %in% "Keohane", c("LALVOTERID", "Voters_FirstName", "Voters_LastName", "Residence_Families_FamilyID")]
# candidate search
ma95[ma95$Voters_LastName %in% "Keohane", c(
"LALVOTERID",
"Voters_FirstName",
"Voters_LastName",
"Residence_Families_FamilyID"
)]
vl.raw <- read.csv("~/Downloads/ma_ad_95.csv")
# candidate search
vl.raw[vl.raw$Voters_LastName %in% "Keohane", c(
"LALVOTERID",
"Voters_FirstName",
"Voters_LastName",
"Residence_Families_FamilyID"
)]
vl.filtered <-
vl.raw[!vl.raw$Residence_Families_FamilyID %in% c(
"R000358689",
"R001044537",
"R003737864",
"R000439984",
"R005011730")]
refsurv <- "292982532"
echo[["link"]] <-
paste0(
"https://www.surveymonkey.com/r/XRJTRZR?refsurv=",
refsurv,
"&vi=",
echo$LALVOTERID
)
echo <-
vl.filtered[vl.filtered$Voters_Active == TRUE &
!is.na(vl.filtered$View_Ops_CellPhone_Phone10), c(
"LALVOTERID",
"Voters_FirstName",
"View_Ops_CellPhone_FullPhone",
"Broad.Ethnic.Groupings"
)]
write.csv(echo, "ma_ad_95_echo19.csv", row.names = F)
vl.raw <- read.csv("~/Downloads/ma_ad_95.csv")
# candidate search
vl.raw[vl.raw$Voters_LastName %in% "Keohane", c(
"LALVOTERID",
"Voters_FirstName",
"Voters_LastName",
"Residence_Families_FamilyID"
)]
vl.filtered <-
vl.raw[!vl.raw$Residence_Families_FamilyID %in% c(
"R000358689",
"R001044537",
"R003737864",
"R000439984",
"R005011730"),]
refsurv <- "292982532"
echo[["link"]] <-
paste0(
"https://www.surveymonkey.com/r/XRJTRZR?refsurv=",
refsurv,
"&vi=",
echo$LALVOTERID
)
echo <-
vl.filtered[vl.filtered$Voters_Active == TRUE &
!is.na(vl.filtered$View_Ops_CellPhone_Phone10), c(
"LALVOTERID",
"Voters_FirstName",
"View_Ops_CellPhone_FullPhone",
"Broad.Ethnic.Groupings"
)]
write.csv(echo, "ma_ad_95_echo19.csv", row.names = F)
vl.raw <- read.csv("~/Downloads/ma_ad_95.csv")
# candidate search
vl.raw[vl.raw$Voters_LastName %in% "Keohane", c(
"LALVOTERID",
"Voters_FirstName",
"Voters_LastName",
"Residence_Families_FamilyID"
)]
vl.filtered <-
vl.raw[!vl.raw$Residence_Families_FamilyID %in% c(
"R000358689",
"R001044537",
"R003737864",
"R000439984",
"R005011730"),]
srvcode = "XRJTRZR"
refsurv <- "292982532"
echo[["link"]] <-
paste0(
"https://www.surveymonkey.com/r/",
srvcode,
"?refsurv=",
refsurv,
"&vi=",
echo$LALVOTERID
)
echo <-
vl.filtered[vl.filtered$Voters_Active == TRUE &
!is.na(vl.filtered$View_Ops_CellPhone_Phone10), c(
"LALVOTERID",
"Voters_FirstName",
"View_Ops_CellPhone_FullPhone",
"Broad.Ethnic.Groupings"
)]
write.csv(echo, "~/Dwonloads/ma_ad_95_echo19.csv", row.names = F)
write.csv(echo, "~/Downloads/ma_ad_95_echo19.csv", row.names = F)
vl.raw <- read.csv("~/Downloads/ma_ad_95.csv")
# candidate search
vl.raw[vl.raw$Voters_LastName %in% "Keohane", c(
"LALVOTERID",
"Voters_FirstName",
"Voters_LastName",
"Residence_Families_FamilyID"
)]
vl.filtered <-
vl.raw[!vl.raw$Residence_Families_FamilyID %in% c(
"R000358689",
"R001044537",
"R003737864",
"R000439984",
"R005011730"),]
srvcode = "XRJTRZR"
refsurv <- "292982532"
echo[["link"]] <-
paste0(
"https://www.surveymonkey.com/r/",
srvcode,
"?refsurv=",
refsurv,
"&vi=",
echo$LALVOTERID
)
echo <-
vl.filtered[vl.filtered$Voters_Active == TRUE &
!is.na(vl.filtered$View_Ops_CellPhone_Phone10), c(
"LALVOTERID",
"Voters_FirstName",
"View_Ops_CellPhone_FullPhone",
"Broad.Ethnic.Groupings"
)]
write.csv(echo, "~/Downloads/ma_ad_95_echo19.csv", row.names = F)
paste0(
"https://www.surveymonkey.com/r/",
srvcode,
"?refsurv=",
refsurv,
"&vi=",
echo$LALVOTERID
)
vl.raw <- read.csv("~/Downloads/ma_ad_95.csv")
# candidate search
vl.raw[vl.raw$Voters_LastName %in% "Keohane", c(
"LALVOTERID",
"Voters_FirstName",
"Voters_LastName",
"Residence_Families_FamilyID"
)]
vl.filtered <-
vl.raw[!vl.raw$Residence_Families_FamilyID %in% c(
"R000358689",
"R001044537",
"R003737864",
"R000439984",
"R005011730"),]
echo <-
vl.filtered[vl.filtered$Voters_Active == TRUE &
!is.na(vl.filtered$View_Ops_CellPhone_Phone10), c(
"LALVOTERID",
"Voters_FirstName",
"View_Ops_CellPhone_FullPhone",
"Broad.Ethnic.Groupings"
)]
srvcode = "XRJTRZR"
refsurv <- "292982532"
echo[["link"]] <-
paste0(
"https://www.surveymonkey.com/r/",
srvcode,
"?refsurv=",
refsurv,
"&vi=",
echo$LALVOTERID
)
echo[["link"]] <-
paste0(
"https://www.surveymonkey.com/r/",
srvcode,
"?refsurv=",
refsurv,
"&vi=",
echo$LALVOTERID
)
paste0(
"https://www.surveymonkey.com/r/",
srvcode,
"?refsurv=",
refsurv,
"&vi=",
echo$LALVOTERID
)
echo$LALVOTERID
source('~/Desktop/echo list gen.R')
vl.raw <- read.csv("~/Downloads/ma_ad_95.csv")
# candidate search
vl.raw[vl.raw$Voters_LastName %in% "Keohane", c(
"LALVOTERID",
"Voters_FirstName",
"Voters_LastName",
"Residence_Families_FamilyID"
)]
# candidate household remove
vl.filtered <-
vl.raw[!vl.raw$Residence_Families_FamilyID %in% c(
"R000358689",
"R001044537",
"R003737864",
"R000439984",
"R005011730"),]
echo <-
vl.filtered[vl.filtered$Voters_Active == TRUE &
!is.na(vl.filtered$View_Ops_CellPhone_Phone10), c(
"LALVOTERID",
"Voters_FirstName",
"View_Ops_CellPhone_FullPhone",
"Broad.Ethnic.Groupings"
)]
echo <-
vl.filtered[vl.filtered$Voters_Active == "Active" &
!is.na(vl.filtered$View_Ops_CellPhone_Phone10),
c(
"LALVOTERID",
"Voters_FirstName",
"View_Ops_CellPhone_FullPhone",
"Broad.Ethnic.Groupings"
)]
srvcode = "XRJTRZR"
refsurv <- "292982532"
echo[["link"]] <-
paste0(
"https://www.surveymonkey.com/r/",
srvcode,
"?refsurv=",
refsurv,
"&vi=",
echo$LALVOTERID
)
write.csv(echo, "~/Downloads/ma_ad_95_echo19.csv", row.names = F)
setwd("~/Desktop/Data/detroitaction")
setwd("~/Desktop/Data/detroit action")
dma<-read.csv("raw/mi_detroit_metro.csv")
names(dma)
head(dma$EthnicGroups_EthnicGroup1Desc)
table(dma$EthnicGroups_EthnicGroup1Desc)
dta[["age"]] <-
as.numeric(Sys.Date() - as.Date(dta$Voters_BirthDate, "%m/%d/%Y")) %/% 365
dta <- dma
dta <- dma[dma$Voters_Active = "Active",]
dta <- dma[dma$Voters_Active == "Active",]
dta <- dma[dma$Voters_Active == "Active" &
!is.na(dta$View_Ops_CellPhone_Phone10,]
dta[["home_phone"]] <- NA
dta[!is.na(dta$Telephones_Phone10), "home_phone"] <-
paste0("+1", dta$Telephones_Phone10[!is.na(dta$Telephones_Phone10)])
dta[["cell_phone"]] <- NA
dta[["cell_phone"]] <- NA
dta[!is.na(dta$View_Ops_CellPhone_Phone10), "cell_phone"] <-
paste0("+1", dta$View_Ops_CellPhone_Phone10[!is.na(dta$View_Ops_CellPhone_Phone10)])
dta[["birth_year"]] <- b_year(dta$Voters_BirthDate)
dta$Voters_BirthDate <- as.Date(dta$Voters_BirthDate, "%m/%d/%Y")
dta[["age"]] <-
as.numeric(Sys.Date() - as.Date(dta$Voters_BirthDate, "%m/%d/%Y")) %/% 365
echo <-
dta[,
c(
"LALVOTERID",
"Voters_FirstName",
"View_Ops_CellPhone_FullPhone",
"age",
"EthnicGroups_EthnicGroup1Desc",
"Zip",
"Languages"
)]
echo$agebucket <- NA
echo$agebucket[echo$age <= 34] <- "18to34"
echo$agebucket[echo$age > 34 & echo$age < 50] <- "35to49"
echo$agebucket[echo$age >= 50] <- "over50"
i <- which(list.files("raw") %in% x)
echo[["link"]] <-
paste0(
"https://www.surveymonkey.com/r/",
srvcode[i],
"?refsurv=",
refsurv[i],
"&vi=",
echo$LALVOTERID
)
write.csv(echo, paste0("echo/", nm, "_all.csv"), row.names = F)
}
dta[["home_phone"]] <- NA
dta[!is.na(dta$Telephones_Phone10), "home_phone"] <-
paste0("+1", dta$Telephones_Phone10[!is.na(dta$Telephones_Phone10)])
dta[["cell_phone"]] <- NA
dta[["cell_phone"]] <- NA
dta[!is.na(dta$View_Ops_CellPhone_Phone10), "cell_phone"] <-
paste0("+1", dta$View_Ops_CellPhone_Phone10[!is.na(dta$View_Ops_CellPhone_Phone10)])
dta <- dma[dma$Voters_Active == "Active" &
!is.na(dta$View_Ops_CellPhone_Phone10,]
dta[["home_phone"]] <- NA
dta[!is.na(dta$Telephones_Phone10), "home_phone"] <-
paste0("+1", dta$Telephones_Phone10[!is.na(dta$Telephones_Phone10)])
dta[["cell_phone"]] <- NA
dta[["cell_phone"]] <- NA
dta[!is.na(dta$View_Ops_CellPhone_Phone10), "cell_phone"] <-
paste0("+1", dta$View_Ops_CellPhone_Phone10[!is.na(dta$View_Ops_CellPhone_Phone10)])
dta[["birth_year"]] <- b_year(dta$Voters_BirthDate)
dta$Voters_BirthDate <- as.Date(dta$Voters_BirthDate, "%m/%d/%Y")
dta[["age"]] <-
as.numeric(Sys.Date() - as.Date(dta$Voters_BirthDate, "%m/%d/%Y")) %/% 365
echo <-
dta[,
c(
"LALVOTERID",
"Voters_FirstName",
"View_Ops_CellPhone_FullPhone",
"age",
"EthnicGroups_EthnicGroup1Desc",
"Zip",
"Languages"
)]
echo$agebucket <- NA
echo$agebucket[echo$age <= 34] <- "18to34"
echo$agebucket[echo$age > 34 & echo$age < 50] <- "35to49"
echo$agebucket[echo$age >= 50] <- "over50"
i <- which(list.files("raw") %in% x)
echo[["link"]] <-
paste0(
"https://www.surveymonkey.com/r/",
srvcode[i],
"?refsurv=",
refsurv[i],
"&vi=",
echo$LALVOTERID
)
write.csv(echo, paste0("echo/", nm, "_all.csv"), row.names = F)
}
dta <-
dma[dma$Voters_Active == "Active" &
!is.na(dta$View_Ops_CellPhone_Phone10, ]
dta[["home_phone"]] <- NA
dta[!is.na(dta$Telephones_Phone10), "home_phone"] <-
paste0("+1", dta$Telephones_Phone10[!is.na(dta$Telephones_Phone10)])
dta[["cell_phone"]] <- NA
dta[["cell_phone"]] <- NA
dta[!is.na(dta$View_Ops_CellPhone_Phone10), "cell_phone"] <-
paste0("+1", dta$View_Ops_CellPhone_Phone10[!is.na(dta$View_Ops_CellPhone_Phone10)])
dta[["birth_year"]] <- b_year(dta$Voters_BirthDate)
dta$Voters_BirthDate <- as.Date(dta$Voters_BirthDate, "%m/%d/%Y")
dta[["age"]] <-
as.numeric(Sys.Date() - as.Date(dta$Voters_BirthDate, "%m/%d/%Y")) %/% 365
echo <-
dta[,
c(
"LALVOTERID",
"Voters_FirstName",
"View_Ops_CellPhone_FullPhone",
"age",
"EthnicGroups_EthnicGroup1Desc",
"Zip",
"Languages"
)]
echo$agebucket <- NA
echo$agebucket[echo$age <= 34] <- "18to34"
echo$agebucket[echo$age > 34 & echo$age < 50] <- "35to49"
echo$agebucket[echo$age >= 50] <- "over50"
i <- which(list.files("raw") %in% x)
echo[["link"]] <-
paste0(
"https://www.surveymonkey.com/r/",
srvcode[i],
"?refsurv=",
refsurv[i],
"&vi=",
echo$LALVOTERID
)
write.csv(echo, paste0("echo/", nm, "_all.csv"), row.names = F)
}
setwd("~/Desktop/Data/detroit action")
srvcode <-
c("N8CR3H2")
refsurv <-
c("294231897")
b_year <- function(bdate) {
vapply(bdate, function(x) {
strsplit(x, "/", fixed = T)[[1]][3]
}, "char")
}
dta <-
dta <-
dma[dma$Voters_Active == "Active" &
!is.na(dta$View_Ops_CellPhone_Phone10), ]
dta <-
dma[dma$Voters_Active == "Active" &
!is.na(dma$View_Ops_CellPhone_Phone10), ]
dta[["home_phone"]] <- NA
dta[!is.na(dta$Telephones_Phone10), "home_phone"] <-
paste0("+1", dta$Telephones_Phone10[!is.na(dta$Telephones_Phone10)])
dta[["cell_phone"]] <- NA
dta[["cell_phone"]] <- NA
dta[!is.na(dta$View_Ops_CellPhone_Phone10), "cell_phone"] <-
paste0("+1", dta$View_Ops_CellPhone_Phone10[!is.na(dta$View_Ops_CellPhone_Phone10)])
dta[["birth_year"]] <- b_year(dta$Voters_BirthDate)
dta$Voters_BirthDate <- as.Date(dta$Voters_BirthDate, "%m/%d/%Y")
dta[["age"]] <-
as.numeric(Sys.Date() - as.Date(dta$Voters_BirthDate, "%m/%d/%Y")) %/% 365
echo <-
dta[,
c(
"LALVOTERID",
"Voters_FirstName",
"View_Ops_CellPhone_FullPhone",
"age",
"EthnicGroups_EthnicGroup1Desc",
"Zip",
"Languages"
)]
echo <-
dta[,
c(
"LALVOTERID",
"Voters_FirstName",
"View_Ops_CellPhone_FullPhone",
"age",
"EthnicGroups_EthnicGroup1Desc"
)]
echo$agebucket <- NA
echo$agebucket[echo$age <= 34] <- "18to34"
echo$agebucket[echo$age > 34 & echo$age < 50] <- "35to49"
echo$agebucket[echo$age >= 50] <- "over50"
echo[["link"]] <-
paste0(
"https://www.surveymonkey.com/r/",
srvcode,
"?refsurv=",
refsurv,
"&vi=",
echo$LALVOTERID
)
write.csv(echo, paste0("echo/", nm, "_all.csv"), row.names = F)
write.csv(echo, paste0("echo/mi_detroit_metro_all.csv"), row.names = F)
setwd("~/Desktop/covid project")
setwd("~/Desktop/covid project")
survey <- read.csv("prezbycountyweek.csv")
covid <- read.csv("time_series_covid19_confirmed_US.csv")
View(covid)
View(survey)
?read.csv
survey <- read.csv("prezbycountyweek.csv", header = F)
covid <- read.csv("time_series_covid19_confirmed_US.csv")
?pivot_longer
??pivot_longer
